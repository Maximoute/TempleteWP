<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="page-container">
    <div class="menu-vertical" id="menu-vertical">
    </div>
</div>

<script>
// Define an enum for image and div ID information
const MenuItemsEnum = [
    // Add more items to the enum
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Panier.webp",
        altText: "Mon Panier",
        divID: "Mon Panier",
        divText: "Mon Panier"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Suggestions-scaled.webp",
        altText: "Suggestions",
        divID: "Suggestions",
        divText: "Suggestions"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Frites.webp",
        altText: "Frites",
        divID: "frites",
        divText: "Frites"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Frikandel.webp",
        altText: "Snacks",
        divID: "snacks",
        divText: "Snacks"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Specialite-e1699464098438.webp",
        altText: "specialites",
        divID: "specialites",
        divText: "Spécialités",
        subMenu: [
            {
                linkText: "Sandwich",
                linkHref: "lien-vers-sandwich.html"
            },
            {
                linkText: "Mitrailettes",
                linkHref: "lien-vers-mitrailettes.html"
            }
        ]
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Hamburgers-removebg-preview.webp",
        altText: "Hamburgers",
        divID: "Hamburgers",
        divText: "Hamburgers"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/pain-frites-removebg-preview.webp",
        altText: "Mitrailettes",
        divID: "mitrailettes",
        divText: "Mitrailettes"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Box-enfant-scaled.webp",
        altText: "Enfants",
        divID: "Enfants",
        divText: "Enfants"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/sauces-removebg-preview.webp",
        altText: "sauces",
        divID: "sauces",
        divText: "sauces"
    },
    {
        imageSrc: "https://friteriemassimo.be/wp-content/uploads/2023/11/Coca-removebg-preview.webp",
        altText: "Boissons",
        divID: "Boissons",
        divText: "Boissons"
    },

];

const menuVertical = document.getElementById("menu-vertical");

// Loop through the enum and create the menu items

let item_id = 0; // Initialize the item_id variable

MenuItemsEnum.forEach((item) => {
    item_id++;
    const menuItem = document.createElement("div");
    menuItem.classList.add("menu-item");
    menuItem.id = item_id;
    menuItem.open = false

    const img = document.createElement("img");
    img.src = item.imageSrc;
    img.alt = item.altText;

    const menuText = document.createElement("div");
    menuText.classList.add("menu-item-text");

    const h3 = document.createElement("h3");
    h3.textContent = item.divText;

    menuText.appendChild(h3);
    menuItem.appendChild(img);
    menuItem.appendChild(menuText);
    menuItem.onclick = function() { test(menuVertical, menuItem.id, item_id); };

    // Append the menu item to the menu
    menuVertical.appendChild(menuItem);

    // Check if the item has a submenu
    if (item.subMenu) {
        const subMenu = document.createElement("div");
        subMenu.classList.add("sub-menu");
        item.subMenu.forEach((subMenuItem) => {
            const subMenuLink = document.createElement("a");
            subMenuLink.href = subMenuItem.linkHref;
            subMenuLink.textContent = subMenuItem.linkText;
            subMenu.appendChild(subMenuLink);
        });
        menuItem.appendChild(subMenu);
    }
});

function test(menuVertical, id, max_id) {
    id = parseInt(id);
    
    // Toggle the state (open/close) of the clicked menu item
    const clickedMenuItem = document.getElementById(id);
    
    if (clickedMenuItem) {
        if (clickedMenuItem.open === true) {
            clickedMenuItem.open = false;
            clickedMenuItem.style.transform = 'translateY(0px)';
            isMoved = false; // Reset the isMoved flag
        } else {
            // Close all open menu items
            for (let i = 1; i <= max_id; i++) {
                const menuItem = document.getElementById(i);
                if (menuItem && menuItem.open === true) {
                    menuItem.open = false;
                    menuItem.style.transform = 'translateY(0px)';
                }
            }
            
            // Open the clicked menu item
            clickedMenuItem.open = true;
            clickedMenuItem.style.transform = 'translateY(100px)';
            isMoved = true; // Set the isMoved flag to true
        }
    }

    // If the clicked item is open and has been moved, move all items below it down
    if (isMoved) {
        for (let i = id + 1; i <= max_id; i++) {
            const menuItem = document.getElementById(i);
            if (menuItem) {
                menuItem.style.transform = 'translateY(100px)';
            }
        }
    }
}

</script>
</body>
</html>